/* A I dont give a shit license (does that technically make me give a shit ? o.O)*/
$(function(){function d(a){var b=Math.floor(a/3600);var c=Math.floor((a-b*3600)/60);var d=a-b*3600-c*60;if(b<10){b="0"+b}if(c<10){c="0"+c}if(d<10){d="0"+d}if(b){b="00"}return b+":"+c+":"+d}function e(a,b){var c=(a+b)/2;$(".bar").css("width",c+"%");if(c>=200){$("#progressStream").fadeOut("slow");setTimeout(function(){$("#streamList").tablesorter({sortList:[[2,1],[1,0]]})},250)}}var a;var b=0,c=0;$.ajax({url:"./assets/php/fetchData.php",type:"GET",data:{action:"twitch"},success:function(a){a=$.parseJSON(a);var d=[];var f,g,h,i,j,k;var l=a["streams"].length;for(var m=0;m<l;m++){f=a["streams"][m]["channel"]["display_name"];g=a["streams"][m]["viewers"];h=a["streams"][m]["channel"]["status"];i=a["streams"][m]["channel"]["name"];j='<object type="application/x-shockwave-flash" height="378" width="531" id="live_embed_player_flash" data="http://www.twitch.tv/widgets/live_embed_player.swf?channel="'+i+'bgcolor="#000000"><param name="allowFullScreen" value="true" /><param name="allowScriptAccess" value="always" /><param name="allowNetworking" value="all" /><param name="movie" value="http://www.twitch.tv/widgets/live_embed_player.swf" /><param name="flashvars" value="hostname=www.twitch.tv&channel='+i+'&auto_play=true&start_volume=25" /></object>';d.push('<tr data-toggle="modal" href="#'+i+'"><td><span class="iconT">T</span></td><td class="userid" rel="tooltip" title="'+h+'">'+f+"</td><td>"+g+"</td></tr>");$("#modals").prepend('<div class="modal hide fade" id="'+i+'"><div class="modal-header"><button type="button" class="close" data-dismiss="modal">×</button><h3>'+f+" - "+h+'</h3></div><div class="modal-body">'+j+"</div>");b=(m+1/l)*100;e(b,c)}$("#twitchAppend td").tooltip();$("#twitchAppend").prepend(d.join(""))}});$("#modals").on("hide",function(){a=$(".modal:visible");$(".modal:visible").remove();setTimeout(function(){$("#modals").prepend(a)},2500)});$.ajax({url:"./assets/php/fetchData.php",type:"GET",data:{action:"own3D"},success:function(a){data=$.parseJSON(a);var f=[];var g,h,i,j,k,l=0;var m=Object.keys(data["streams"]).length;for(var n in data["streams"]){var o=data["streams"][n]["liveEvent"];if(data["streams"][n]["liveEvent"]["isLive"]==="true"){g=n;h=o["liveViewers"];i=n+" - Live since: "+d(o["liveDuration"]);j=o["id"];k='<object height="378" width="531"><param name="movie" value="http://www.own3d.tv/livestream/'+j+';autoplay=true" /><param name="allowscriptaccess" value="always" /><param name="allowfullscreen" value="true" /><param name="wmode" value="transparent" /><embed src="http://www.own3d.tv/livestream/'+j+';autoplay=true" type="application/x-shockwave-flash" allowfullscreen="true" allowscriptaccess="always" height="378" width="531" wmode="transparent"></embed></object>';f.push('<tr data-toggle="modal" href="#'+g+'"><td><span class="iconO">O</span></td><td class="userid" rel="tooltip" title="'+i+'">'+g+"</td><td>"+h+"</td></tr>");$("#modals").prepend('<div class="modal hide fade" id="'+g+'"><div class="modal-header"><button type="button" class="close" data-dismiss="modal">×</button><h3>'+g+" - "+i+'</h3></div><div class="modal-body">'+k+"</div>")}c=(l+1/m)*100;e(b,c);l++}$("#twitchAppend").prepend(f.join(""));$("#twitchAppend td").tooltip()}})})